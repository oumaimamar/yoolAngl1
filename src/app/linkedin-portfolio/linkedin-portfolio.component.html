<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

<div class="container mt-5">
  <!-- Profile Header with Edit Button -->
  <div class="card profile-header mb-4">
    <div class="cover-photo" style="background-image: url('assets/img/pg.jpg');">
      <button class="btn btn-light edit-cover-btn" (click)="editCoverPhoto()">
        <i class="bi bi-camera"></i> Edit
      </button>
    </div>
    <div class="profile-info text-center">
      <div class="position-relative d-inline-block">
        <img src="assets/img/cs.jpg" class="profile-picture rounded-circle" alt="Profile">
        <button class="btn btn-light edit-profile-btn" (click)="editProfilePicture()">
          <i class="bi bi-camera"></i>
        </button>
      </div>
      <h1 class="mt-3">{{name}}</h1>
      <p class="text-muted">{{title}}</p>
      <p>{{location}} • <a href="#">{{connections}} connections</a></p>
      <div class="d-flex justify-content-center gap-2 mb-3">
        <button class="btn btn-primary">Open to</button>
        <button class="btn btn-outline-primary">Add profile section</button>
        <button class="btn btn-outline-secondary">More</button>
      </div>
    </div>
  </div>

  <!-- About Section with Edit -->
  <div class="card mb-4">
    <div class="card-body position-relative">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="card-title">About</h2>
        <button class="btn btn-outline-secondary btn-sm" (click)="editAbout()">
          <i class="bi bi-pencil"></i> Edit
        </button>
      </div>
      <p class="card-text">{{about}}</p>
    </div>
  </div>

  <!-- Experience Section with Add/Edit -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="card-title">Experience</h2>
        <button class="btn btn-primary btn-sm" (click)="addExperience()">
          <i class="bi bi-plus"></i> Add
        </button>
      </div>

      <div *ngFor="let exp of experiences" class="mb-4 position-relative">
        <div class="d-flex">
          <img [src]="exp.companyLogo || 'assets/default-company.png'" class="me-3 rounded" width="60" height="60" alt="Logo">
          <div class="flex-grow-1">
            <h5>{{ exp.post }}</h5>
            <p class="mb-1">{{ exp.entreprise }} • {{ exp.typeEmploi }}</p>
            <p class="text-muted">
              {{ exp.dateDebut | date:'MMM yyyy' }} –
              {{ exp.dateFin ? (exp.dateFin | date:'MMM yyyy') : 'Present' }} •
              {{ exp.ville }}
            </p>
            <p>{{ exp.description }}</p>
          </div>
        </div>
        <div class="position-absolute top-0 end-0 btn-group">
          <button class="btn btn-sm btn-outline-secondary" (click)="editExperience(exp)">
            <i class="bi bi-pencil"></i>
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteExperience(exp)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!--  Formation Section with Add/Edit  -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="card-title">Formation</h2>
        <button class="btn btn-primary btn-sm" (click)="addFormation()">
          <i class="bi bi-plus"></i> Add
        </button>
      </div>

      <div *ngFor="let formation of formations" class="mb-3 position-relative">
        <div class="d-flex">
          <img [src]="formation.schoolLogo || 'assets/default-school.png'" class="me-3 rounded" width="60" height="60" alt="School logo">
          <div class="flex-grow-1">
            <h5>{{ formation.ecole }}</h5>
            <p class="text-muted mb-1">
              {{ formation.dateDebut | date:'yyyy' }} –
              {{ formation.dateFin ? (formation.dateFin | date:'yyyy') : 'Present' }}
            </p>
            <p class="mb-1">{{ formation.diplome }} • {{ formation.domain_etude }}</p>

            <p>{{ formation.description }}</p>
          </div>
        </div>
        <div class="position-absolute top-0 end-0 btn-group">
          <button class="btn btn-sm btn-outline-secondary" (click)="editEducation(formation)">
            <i class="bi bi-pencil"></i>
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteFormation(formation)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </div>


  <!-- Certification Section with Add/Edit -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="card-title">Certifications</h2>
        <button class="btn btn-primary btn-sm" (click)="addCertification()">
          <i class="bi bi-plus"></i> Add
        </button>
      </div>

      <div *ngFor="let cert of certifications" class="mb-3 position-relative">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h5>{{ cert.titre }}</h5>
            <p class="mb-1 text-muted">{{ cert.organisation }}</p>
            <p class="text-muted mb-1">
              {{ cert.dateDebut | date: 'yyyy-MM-dd' }} –
              {{ cert.dateFin ? (cert.dateFin | date: 'yyyy-MM-dd') : 'Present' }}
            </p>
            <p>{{ cert.description }}</p>
          </div>
        </div>

        <div class="position-absolute top-0 end-0 btn-group">
          <button class="btn btn-sm btn-outline-secondary" (click)="editCertification(cert)">
            <i class="bi bi-pencil"></i>
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteCertification(cert)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </div>



  <!-- Skills Section with Add/Edit -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="card-title">Skills</h2>
        <button class="btn btn-primary btn-sm" (click)="openSkillsModal()">
          <i class="bi bi-plus"></i> Add
        </button>
      </div>

      <div class="d-flex flex-wrap gap-2">
      <span *ngFor="let skill of skills" class="badge bg-light text-dark p-2 position-relative">
        {{ skill.name }}
        <button
          class="btn-close btn-close-black btn-sm position-absolute top-0 end-0 translate-middle"
          (click)="deleteSkill(skill)">
        </button>
      </span>
      </div>
    </div>
  </div>



</div>
